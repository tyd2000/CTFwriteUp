# 风险评估（渗透）

目标：尽可能多地获取flag，拿到root权限，一个环境中flag数量应该在5个左右。

常见的flag分布情况：①网站站点路径下存在一个（信息泄露）；②登录后台；③网站漏洞利用，getshell网站根路径下存在flag；④数据库存放flag；⑤root路径下存在flag。

## 渗透流程

### 一、信息收集

信息收集工具包括：`nmap`，`dirsearch`等。

#### 1、主机信息收集

**`nmap`**

#### 2、网站信息收集

- 目录探测：**`dirsearch`**。
  - 通过`dirsearch`进行目录探测：`dirsearch -u http://192.168.1.58/`。
  - 如果一个网站需要与数据库进行交互肯定会存在数据库配置文件，常见名称：db，db_config，config，data_config。比如`http://192.168.1.58/config.php`。`robots.txt`是网站目录相关信息。

- 网站功能点：通知、公告、发表文章等相关地方，需要人工来审查网站页面。

- 主站80，站点上通过页面观察发现新闻资讯-公司动态存在注入点。
  `http://192.168.1.58/newsshow.php?id=67%20and%201=1`

### 二、登录后台

漏洞利用方式、或者弱口令、默认密码等方式。

- 主站上的sql注入漏洞利用。
  `sqlmap -u "http://192.168.1.58/newsshow.php?id=67" --dbs --batch`

### 三、getshell

写入一句话木马，能够连接shell。



### 四、数据库

#### 1、漏洞利用（注入）

#### 2、通过交互的配置文件获取数据库相关信息。



### 五、提权

#### 1、内核提权（系统版本的相关信息）



#### 2、`sudo`、`suid`等相关提权



#### 3、数据库授权



### 六、